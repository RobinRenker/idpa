<form [formGroup]="vehicleForm" novalidate *ngIf="(vehicle | async) || new">

    <mat-form-field>
        <input matInput type="string" placeholder="Name" formControlName="name" requied>
        <span matSuffix></span>
    </mat-form-field>

    <mat-form-field>
        <mat-select type="number" placeholder="Typ" formControlName="type" required (change)="changeType()">
            <mat-option *ngFor="let type of types" [value]="type.value">
                {{ type.viewValue }}
            </mat-option>
        </mat-select>
    </mat-form-field>

    <mat-form-field *ngIf="vehicleForm.value.weight != null">
        <input matInput type="number" placeholder="Gewicht" formControlName="weight" requied>
        <span matSuffix>kg</span>
    </mat-form-field>

    <mat-form-field *ngIf="vehicleForm.value.maxPassengers != null">
        <input matInput type="number" placeholder="Maximale Passagiere" formControlName="maxPassengers" requied>
        <span matSuffix>Pers.</span>
    </mat-form-field>

    <mat-form-field *ngIf="vehicleForm.value.lifespan != null">
        <input matInput type="number" placeholder="Lebenserwartung" formControlName="lifespan" requied>
        <span matSuffix>Years</span>
    </mat-form-field>

    <mat-form-field>
        <mat-select type="number" placeholder="Fuel" formControlName="fuel" required>
            <mat-option *ngFor="let fuel of fuels" [value]="fuel.id">
                {{ fuel.text }}
            </mat-option>
        </mat-select>
    </mat-form-field>

    <mat-form-field *ngIf="vehicleForm.value.energy100km != null && vehicleForm.value.fuel == 0">
        <input matInput type="number" placeholder="Energie Verbrauch pro 100km" formControlName="energy100km" requied>
        <span matSuffix>Watth</span>
    </mat-form-field>

    <div *ngIf="vehicleForm.value.fuel == 1 || vehicleForm.value.fuel == 2">
        <mat-form-field *ngIf="vehicleForm.value.co2perkm != null">
            <input matInput type="number" placeholder="CO2 Ausstoss pro 100km" formControlName="co2perkm" requied>
            <span matSuffix>Gramm</span>
        </mat-form-field>

        <mat-form-field *ngIf="vehicleForm.value.liter100km != null">
            <input matInput type="number" placeholder="Liter pro 100km" formControlName="liter100km" requied>
            <span matSuffix>Liter</span>
        </mat-form-field>
    </div>

    <mat-form-field *ngIf="vehicleForm.value.greyprodco2 != null">
        <input matInput type="number" placeholder="Herstellungsausstoss" formControlName="greyprodco2" requied>
        <span matSuffix>g</span>
    </mat-form-field>

    <mat-form-field *ngIf="vehicleForm.value.greyprodenergy != null">
        <input matInput type="number" placeholder="Herstellungsenergie" formControlName="greyprodenergy" requied>
        <span matSuffix>watt</span>
    </mat-form-field>

    <mat-accordion *ngIf="vehicleForm.value.type != null">
        <mat-expansion-panel>
            <mat-expansion-panel-header>
                <mat-panel-title>Erweitert</mat-panel-title>
                <!--<mat-panel-description>
                    Type your name and age
                </mat-panel-description>-->
            </mat-expansion-panel-header>

            <mat-form-field *ngIf="vehicleForm.value.a != null">
                <input matInput type="number" placeholder="Frontal Fläche" formControlName="a" requied>
                <span matSuffix>m²</span>
            </mat-form-field>

            <mat-form-field *ngIf="vehicleForm.value.cw != null">
                <input matInput type="number" placeholder="Aerodynamik" formControlName="cw" requied>
                <span matSuffix></span>
            </mat-form-field>

            <mat-form-field *ngIf="vehicleForm.value.roll != null">
                <input matInput type="number" placeholder="Rollwiederstand" formControlName="roll" requied>
                <span matSuffix></span>
            </mat-form-field>

            <mat-form-field *ngIf="vehicleForm.value.airdensity != null">
                <input matInput type="number" placeholder="Luftdichte" formControlName="airdensity" requied>
                <span matSuffix>kg/m³</span>
            </mat-form-field>

            <mat-form-field *ngIf="vehicleForm.value.g != null">
                <input matInput type="number" placeholder="Gravitation" formControlName="g" requied>
                <span matSuffix>m/s²</span>
            </mat-form-field>

        </mat-expansion-panel>
    </mat-accordion>

    <!--<mat-tab-group *ngIf="vehicleForm.value.type != undefined">
        <mat-tab label="Normal">

        </mat-tab>
        <mat-tab label="Erweitert">

        </mat-tab>
    </mat-tab-group>-->

    <button mat-raised-button color="primary" (click)="saveVehicle()">Speichern</button>

    <div class="spacer"></div>

</form>

<mat-spinner *ngIf="!(vehicle | async) && !new"></mat-spinner>
